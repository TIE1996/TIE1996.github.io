(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{nZJs:function(t,i,e){"use strict";e.r(i),e.d(i,"QuestionsPageModule",(function(){return x}));var n=e("ofXK"),s=e("3Pt+"),o=e("TEn/"),c=e("tyNb"),r=e("mrSG"),l=e("8RjR"),u=e("fXoL"),b=e("R7Hv");function a(t,i){if(1&t&&(u.Mb(0),u.Kb(1,"img",14),u.Lb()),2&t){const t=u.Yb().$implicit;u.zb(1),u.bc("src",t.img,u.ec)}}function h(t,i){if(1&t){const t=u.Pb();u.Mb(0),u.Ob(1,"ion-input",15),u.Wb("ngModelChange",(function(i){u.dc(t);const e=u.Yb().index,n=u.Yb();return n.solutions.solutions.get(n.topic).solution[e]=i})),u.Nb(),u.Ob(2,"ion-button",16),u.Wb("click",(function(){u.dc(t);const i=u.Yb().index;return u.Yb().checkAnswer(i)})),u.ic(3,"Submit"),u.Nb(),u.Lb()}if(2&t){const t=u.Yb().index,i=u.Yb();u.zb(1),u.bc("ngModel",i.solutions.solutions.get(i.topic).solution[t]),u.zb(1),u.bc("disabled",i.solutions.solutions.get(i.topic).correct[t])}}function d(t,i){if(1&t){const t=u.Pb();u.Mb(0),u.Ob(1,"ion-button",17),u.Wb("click",(function(){u.dc(t);const e=i.$implicit,n=i.index,s=u.Yb(2).index;return u.Yb().checkMultAnswer(e,s,n)})),u.ic(2),u.Nb(),u.Lb()}if(2&t){const t=i.$implicit,e=i.index,n=u.Yb(2).index,s=u.Yb();u.zb(1),u.bc("color",0===s.solutions.solutions.get(s.topic).answerStatus[n][e]?"primary":1===s.solutions.solutions.get(s.topic).answerStatus[n][e]?"danger":"success")("disabled",0!==s.solutions.solutions.get(s.topic).answerStatus[n][e]),u.zb(1),u.jc(t)}}function g(t,i){if(1&t&&(u.Mb(0),u.hc(1,d,3,3,"ng-container",11),u.Lb()),2&t){const t=u.Yb().$implicit;u.zb(1),u.bc("ngForOf",t.possibilities)}}function p(t,i){if(1&t){const t=u.Pb();u.Mb(0),u.Ob(1,"ion-input",18),u.Wb("ngModelChange",(function(i){u.dc(t);const e=u.Yb().index,n=u.Yb();return n.solutions.solutions.get(n.topic).solution[e]=i})),u.Nb(),u.Ob(2,"ion-button",16),u.Wb("click",(function(){u.dc(t);const i=u.Yb().index;return u.Yb().checkNumberAnswer(i)})),u.ic(3,"Submit"),u.Nb(),u.Lb()}if(2&t){const t=u.Yb().index,i=u.Yb();u.zb(1),u.bc("ngModel",i.solutions.solutions.get(i.topic).solution[t]),u.zb(1),u.bc("disabled",i.solutions.solutions.get(i.topic).correct[t])}}function m(t,i){1&t&&(u.Mb(0),u.Kb(1,"ion-icon",19),u.Lb())}function f(t,i){if(1&t&&(u.Mb(0),u.Ob(1,"ion-slide",12),u.hc(2,a,2,1,"ng-container",13),u.Ob(3,"p"),u.ic(4),u.Nb(),u.hc(5,h,4,2,"ng-container",13),u.hc(6,g,2,1,"ng-container",13),u.hc(7,p,4,2,"ng-container",13),u.hc(8,m,2,0,"ng-container",13),u.Nb(),u.Lb()),2&t){const t=i.$implicit,e=i.index,n=u.Yb();u.zb(2),u.bc("ngIf",null!=t.img),u.zb(2),u.kc(" ",t.question," "),u.zb(1),u.bc("ngIf","normal"===t.type),u.zb(1),u.bc("ngIf","multiple_choice"===t.type),u.zb(1),u.bc("ngIf","number"===t.type),u.zb(1),u.bc("ngIf",n.solutions.solutions.get(n.topic).correct[e])}}const w=[{path:"",component:(()=>{class t{constructor(t,i,e,n){this.route=t,this.dataservice=i,this.toastController=e,this.router=n,this.positiveMessages=["Super","Klasse","Wow!"],this.negativeMessages=["Mensche Kerle","Das geht doch besser","Streng dich mal an!"],this.continueMessage=["Das war es noch nicht ganz","Fast alles","Weitermachen!","Noch nicht ganz"],this.slideOpts={initialSlide:0,speed:400,allowSlideNext:!1},this.numberOfConsecutiveErrors=0,this.numberOfMaximumErrors=3,this.timeoutDuration=5e3}getRandomInt(t){return Math.floor(Math.random()*Math.floor(t))}ngOnInit(){this.solutions=this.dataservice.getSubmissions(),this.route.queryParams.subscribe(t=>{this.topic=t.topic,console.log(this.topic),l.a.themen.forEach(t=>{t.titel===this.topic&&(this.thema=t,this.slideOpts.initialSlide=this.solutions.solutions.get(this.topic).totalCorrect)})})}checkLock(){return Object(r.a)(this,void 0,void 0,(function*(){console.log("swipe changed"),(yield this.slider.getActiveIndex())===this.solutions.solutions.get(this.topic).totalCorrect?this.slider.lockSwipeToNext(!0):this.slider.lockSwipeToNext(!1)}))}checkAnswer(t){this.thema.questions[t].answer.indexOf(this.solutions.solutions.get(this.topic).solution[t].toLowerCase().trim())>-1?this.rightAnswer(t):this.wrongAnswer()}checkNumberAnswer(t){let i=Number(this.solutions.solutions.get(this.topic).solution[t]),e=Number(this.thema.questions[t].answer[0].trim()),n=this.thema.questions[t].tolerance;i>=e-e*n&&i<=e+e*n?this.rightAnswer(t):this.wrongAnswer()}checkMultAnswer(t,i,e){let n=this.thema.questions[i].answer.indexOf(t);n>-1?(this.solutions.solutions.get(this.topic).answerStatus[i][e]=2,this.thema.questions[i].answer.splice(n,1),0===this.thema.questions[i].answer.length?this.rightAnswer(i):this.presentToast("continue")):(this.solutions.solutions.get(this.topic).answerStatus[i][e]=1,this.wrongAnswer())}rightAnswer(t){this.presentToast("positive"),this.slider.lockSwipeToNext(!1),this.solutions.solutions.get(this.topic).correct[t]=!0,this.solutions.solutions.get(this.topic).totalCorrect++,this.numberOfConsecutiveErrors=0}wrongAnswer(){this.presentToast("negative"),this.numberOfConsecutiveErrors++,this.numberOfConsecutiveErrors>=this.numberOfMaximumErrors&&this.showOverlay()}showOverlay(){document.getElementById("overlay").style.visibility="visible",setTimeout(()=>{document.getElementById("overlay").style.visibility="hidden"},this.timeoutDuration)}goBack(){this.router.navigateByUrl("/home")}presentToast(t){return Object(r.a)(this,void 0,void 0,(function*(){let i="";if("positive"===t){let t=this.getRandomInt(this.positiveMessages.length);i=this.positiveMessages[t]}else if("negative"==t){let t=this.getRandomInt(this.negativeMessages.length);i=this.negativeMessages[t]}else{let t=this.getRandomInt(this.continueMessage.length);i=this.continueMessage[t]}(yield this.toastController.create({message:i,duration:2e3})).present()}))}}return t.\u0275fac=function(i){return new(i||t)(u.Jb(c.a),u.Jb(b.a),u.Jb(o.v),u.Jb(c.g))},t.\u0275cmp=u.Db({type:t,selectors:[["app-questions"]],viewQuery:function(t,i){var e;1&t&&u.mc(o.m,!0),2&t&&u.cc(e=u.Xb())&&(i.slider=e.first)},decls:16,vars:5,consts:[[3,"translucent"],["slot","start"],[3,"click"],["name","arrow-back-outline"],["visible","true","id","overlay",2,"position","fixed","visibility","hidden","height","100vh","width","100vw","background-color","grey","z-index","1000","opacity","0.9"],[2,"height","100%","width","100%","display","flex","align-items","center","justify-content","center","flex-direction","column"],["name","lines",2,"height","100%","max-width","150px","max-height","150px","width","100%","display","flex","align-items","center","justify-content","center","flex-direction","column"],["stlye","font-size:30px"],[3,"fullscreen"],["id","container",2,"transform","unset","top","unset","height","100%"],["pager","true",2,"height","100%",3,"options","ionSlideDidChange"],[4,"ngFor","ngForOf"],[2,"display","block","height","100%","overflow-y","scroll"],[4,"ngIf"],[3,"src"],["placeholder","Enter answer",3,"ngModel","ngModelChange"],["expand","block",3,"disabled","click"],["expand","full","shape","round",1,"item-text-wrap",2,"white-space","pre-wrap",3,"color","disabled","click"],["type","number","placeholder","Enter answer",3,"ngModel","ngModelChange"],["name","checkmark-circle-outline",2,"color","limegreen","max-width","100px","max-height","100px","height","50vw","width","50vw"]],template:function(t,i){1&t&&(u.Ob(0,"ion-header",0),u.Ob(1,"ion-toolbar"),u.Ob(2,"ion-buttons",1),u.Ob(3,"ion-button",2),u.Wb("click",(function(){return i.goBack()})),u.Kb(4,"ion-icon",3),u.Nb(),u.Nb(),u.Ob(5,"ion-title"),u.ic(6),u.Nb(),u.Nb(),u.Nb(),u.Ob(7,"div",4),u.Ob(8,"div",5),u.Kb(9,"ion-spinner",6),u.Ob(10,"p",7),u.ic(11," Timeout! "),u.Nb(),u.Nb(),u.Nb(),u.Ob(12,"ion-content",8),u.Ob(13,"div",9),u.Ob(14,"ion-slides",10),u.Wb("ionSlideDidChange",(function(){return i.checkLock()})),u.hc(15,f,9,6,"ng-container",11),u.Nb(),u.Nb(),u.Nb()),2&t&&(u.bc("translucent",!0),u.zb(6),u.kc(" ",i.thema.titel," "),u.zb(6),u.bc("fullscreen",!0),u.zb(2),u.bc("options",i.slideOpts),u.zb(1),u.bc("ngForOf",i.thema.questions))},directives:[o.e,o.p,o.c,o.b,o.f,o.o,o.n,o.d,o.m,n.h,o.l,n.i,o.g,o.u,s.c,s.d,o.s],styles:[""]}),t})()}];let v=(()=>{class t{}return t.\u0275mod=u.Hb({type:t}),t.\u0275inj=u.Gb({factory:function(i){return new(i||t)},imports:[[c.i.forChild(w)],c.i]}),t})(),x=(()=>{class t{}return t.\u0275mod=u.Hb({type:t}),t.\u0275inj=u.Gb({factory:function(i){return new(i||t)},imports:[[n.b,s.a,o.q,v]]}),t})()}}]);