function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,i){return e&&_defineProperties(t.prototype,e),i&&_defineProperties(t,i),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{nZJs:function(t,e,i){"use strict";i.r(e),i.d(e,"QuestionsPageModule",(function(){return O}));var n=i("ofXK"),s=i("3Pt+"),o=i("TEn/"),r=i("tyNb"),c=i("mrSG"),a=i("8RjR"),l=i("fXoL"),u=i("R7Hv");function b(t,e){if(1&t&&(l.Mb(0),l.Kb(1,"img",14),l.Lb()),2&t){var i=l.Yb().$implicit;l.zb(1),l.bc("src",i.img,l.ec)}}function h(t,e){if(1&t){var i=l.Pb();l.Mb(0),l.Ob(1,"ion-input",15),l.Wb("ngModelChange",(function(t){l.dc(i);var e=l.Yb().index,n=l.Yb();return n.solutions.solutions.get(n.topic).solution[e]=t})),l.Nb(),l.Ob(2,"ion-button",16),l.Wb("click",(function(){l.dc(i);var t=l.Yb().index;return l.Yb().checkAnswer(t)})),l.ic(3,"Submit"),l.Nb(),l.Lb()}if(2&t){var n=l.Yb().index,s=l.Yb();l.zb(1),l.bc("ngModel",s.solutions.solutions.get(s.topic).solution[n]),l.zb(1),l.bc("disabled",s.solutions.solutions.get(s.topic).correct[n])}}function g(t,e){if(1&t){var i=l.Pb();l.Mb(0),l.Ob(1,"ion-button",17),l.Wb("click",(function(){l.dc(i);var t=e.$implicit,n=e.index,s=l.Yb(2).index;return l.Yb().checkMultAnswer(t,s,n)})),l.ic(2),l.Nb(),l.Lb()}if(2&t){var n=e.$implicit,s=e.index,o=l.Yb(2).index,r=l.Yb();l.zb(1),l.bc("color",0===r.solutions.solutions.get(r.topic).answerStatus[o][s]?"primary":1===r.solutions.solutions.get(r.topic).answerStatus[o][s]?"danger":"success")("disabled",0!==r.solutions.solutions.get(r.topic).answerStatus[o][s]),l.zb(1),l.jc(n)}}function d(t,e){if(1&t&&(l.Mb(0),l.hc(1,g,3,3,"ng-container",11),l.Lb()),2&t){var i=l.Yb().$implicit;l.zb(1),l.bc("ngForOf",i.possibilities)}}function p(t,e){if(1&t){var i=l.Pb();l.Mb(0),l.Ob(1,"ion-input",18),l.Wb("ngModelChange",(function(t){l.dc(i);var e=l.Yb().index,n=l.Yb();return n.solutions.solutions.get(n.topic).solution[e]=t})),l.Nb(),l.Ob(2,"ion-button",16),l.Wb("click",(function(){l.dc(i);var t=l.Yb().index;return l.Yb().checkNumberAnswer(t)})),l.ic(3,"Submit"),l.Nb(),l.Lb()}if(2&t){var n=l.Yb().index,s=l.Yb();l.zb(1),l.bc("ngModel",s.solutions.solutions.get(s.topic).solution[n]),l.zb(1),l.bc("disabled",s.solutions.solutions.get(s.topic).correct[n])}}function f(t,e){1&t&&(l.Mb(0),l.Kb(1,"ion-icon",19),l.Lb())}function m(t,e){if(1&t&&(l.Mb(0),l.Ob(1,"ion-slide",12),l.hc(2,b,2,1,"ng-container",13),l.Ob(3,"p"),l.ic(4),l.Nb(),l.hc(5,h,4,2,"ng-container",13),l.hc(6,d,2,1,"ng-container",13),l.hc(7,p,4,2,"ng-container",13),l.hc(8,f,2,0,"ng-container",13),l.Nb(),l.Lb()),2&t){var i=e.$implicit,n=e.index,s=l.Yb();l.zb(2),l.bc("ngIf",null!=i.img),l.zb(2),l.kc(" ",i.question," "),l.zb(1),l.bc("ngIf","normal"===i.type),l.zb(1),l.bc("ngIf","multiple_choice"===i.type),l.zb(1),l.bc("ngIf","number"===i.type),l.zb(1),l.bc("ngIf",s.solutions.solutions.get(s.topic).correct[n])}}var v,w,k,y=[{path:"",component:(v=function(){function t(e,i,n,s){_classCallCheck(this,t),this.route=e,this.dataservice=i,this.toastController=n,this.router=s,this.positiveMessages=["Super","Klasse","Wow!"],this.negativeMessages=["Mensche Kerle","Das geht doch besser","Streng dich mal an!"],this.continueMessage=["Das war es noch nicht ganz","Fast alles","Weitermachen!","Noch nicht ganz"],this.slideOpts={initialSlide:0,speed:400,allowSlideNext:!1},this.numberOfConsecutiveErrors=0,this.numberOfMaximumErrors=3,this.timeoutDuration=5e3}return _createClass(t,[{key:"getRandomInt",value:function(t){return Math.floor(Math.random()*Math.floor(t))}},{key:"ngOnInit",value:function(){var t=this;this.solutions=this.dataservice.getSubmissions(),this.route.queryParams.subscribe((function(e){t.topic=e.topic,console.log(t.topic),a.a.themen.forEach((function(e){e.titel===t.topic&&(t.thema=e,t.slideOpts.initialSlide=t.solutions.solutions.get(t.topic).totalCorrect)}))}))}},{key:"checkLock",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("swipe changed"),t.next=3,this.slider.getActiveIndex();case 3:if(t.t0=t.sent,t.t1=this.solutions.solutions.get(this.topic).totalCorrect,t.t0!==t.t1){t.next=9;break}this.slider.lockSwipeToNext(!0),t.next=10;break;case 9:this.slider.lockSwipeToNext(!1);case 10:case"end":return t.stop()}}),t,this)})))}},{key:"checkAnswer",value:function(t){this.thema.questions[t].answer.indexOf(this.solutions.solutions.get(this.topic).solution[t].toLowerCase().trim())>-1?this.rightAnswer(t):this.wrongAnswer()}},{key:"checkNumberAnswer",value:function(t){var e=Number(this.solutions.solutions.get(this.topic).solution[t]),i=Number(this.thema.questions[t].answer[0].trim()),n=this.thema.questions[t].tolerance;e>=i-i*n&&e<=i+i*n?this.rightAnswer(t):this.wrongAnswer()}},{key:"checkMultAnswer",value:function(t,e,i){var n=this.thema.questions[e].answer.indexOf(t);n>-1?(this.solutions.solutions.get(this.topic).answerStatus[e][i]=2,this.thema.questions[e].answer.splice(n,1),0===this.thema.questions[e].answer.length?this.rightAnswer(e):this.presentToast("continue")):(this.solutions.solutions.get(this.topic).answerStatus[e][i]=1,this.wrongAnswer())}},{key:"rightAnswer",value:function(t){this.presentToast("positive"),this.slider.lockSwipeToNext(!1),this.solutions.solutions.get(this.topic).correct[t]=!0,this.solutions.solutions.get(this.topic).totalCorrect++,this.numberOfConsecutiveErrors=0}},{key:"wrongAnswer",value:function(){this.presentToast("negative"),this.numberOfConsecutiveErrors++,this.numberOfConsecutiveErrors>=this.numberOfMaximumErrors&&this.showOverlay()}},{key:"showOverlay",value:function(){document.getElementById("overlay").style.visibility="visible",setTimeout((function(){document.getElementById("overlay").style.visibility="hidden"}),this.timeoutDuration)}},{key:"goBack",value:function(){this.router.navigateByUrl("/home")}},{key:"presentToast",value:function(t){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var i,n,s,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i="","positive"===t?(n=this.getRandomInt(this.positiveMessages.length),i=this.positiveMessages[n]):"negative"==t?(s=this.getRandomInt(this.negativeMessages.length),i=this.negativeMessages[s]):(o=this.getRandomInt(this.continueMessage.length),i=this.continueMessage[o]),e.next=4,this.toastController.create({message:i,duration:2e3});case 4:e.sent.present();case 5:case"end":return e.stop()}}),e,this)})))}}]),t}(),v.\u0275fac=function(t){return new(t||v)(l.Jb(r.a),l.Jb(u.a),l.Jb(o.v),l.Jb(r.g))},v.\u0275cmp=l.Db({type:v,selectors:[["app-questions"]],viewQuery:function(t,e){var i;1&t&&l.mc(o.m,!0),2&t&&l.cc(i=l.Xb())&&(e.slider=i.first)},decls:16,vars:5,consts:[[3,"translucent"],["slot","start"],[3,"click"],["name","arrow-back-outline"],["visible","true","id","overlay",2,"position","fixed","visibility","hidden","height","100vh","width","100vw","background-color","grey","z-index","1000","opacity","0.9"],[2,"height","100%","width","100%","display","flex","align-items","center","justify-content","center","flex-direction","column"],["name","lines",2,"height","100%","max-width","150px","max-height","150px","width","100%","display","flex","align-items","center","justify-content","center","flex-direction","column"],["stlye","font-size:30px"],[3,"fullscreen"],["id","container",2,"transform","unset","top","unset","height","100%"],["pager","true",2,"height","100%",3,"options","ionSlideDidChange"],[4,"ngFor","ngForOf"],[2,"display","block","height","100%","overflow-y","scroll"],[4,"ngIf"],[3,"src"],["placeholder","Enter answer",3,"ngModel","ngModelChange"],["expand","block",3,"disabled","click"],["expand","full","shape","round",1,"item-text-wrap",2,"white-space","pre-wrap",3,"color","disabled","click"],["type","number","placeholder","Enter answer",3,"ngModel","ngModelChange"],["name","checkmark-circle-outline",2,"color","limegreen","max-width","100px","max-height","100px","height","50vw","width","50vw"]],template:function(t,e){1&t&&(l.Ob(0,"ion-header",0),l.Ob(1,"ion-toolbar"),l.Ob(2,"ion-buttons",1),l.Ob(3,"ion-button",2),l.Wb("click",(function(){return e.goBack()})),l.Kb(4,"ion-icon",3),l.Nb(),l.Nb(),l.Ob(5,"ion-title"),l.ic(6),l.Nb(),l.Nb(),l.Nb(),l.Ob(7,"div",4),l.Ob(8,"div",5),l.Kb(9,"ion-spinner",6),l.Ob(10,"p",7),l.ic(11," Timeout! "),l.Nb(),l.Nb(),l.Nb(),l.Ob(12,"ion-content",8),l.Ob(13,"div",9),l.Ob(14,"ion-slides",10),l.Wb("ionSlideDidChange",(function(){return e.checkLock()})),l.hc(15,m,9,6,"ng-container",11),l.Nb(),l.Nb(),l.Nb()),2&t&&(l.bc("translucent",!0),l.zb(6),l.kc(" ",e.thema.titel," "),l.zb(6),l.bc("fullscreen",!0),l.zb(2),l.bc("options",e.slideOpts),l.zb(1),l.bc("ngForOf",e.thema.questions))},directives:[o.e,o.p,o.c,o.b,o.f,o.o,o.n,o.d,o.m,n.h,o.l,n.i,o.g,o.u,s.c,s.d,o.s],styles:[""]}),v)}],x=((k=function t(){_classCallCheck(this,t)}).\u0275mod=l.Hb({type:k}),k.\u0275inj=l.Gb({factory:function(t){return new(t||k)},imports:[[r.i.forChild(y)],r.i]}),k),O=((w=function t(){_classCallCheck(this,t)}).\u0275mod=l.Hb({type:w}),w.\u0275inj=l.Gb({factory:function(t){return new(t||w)},imports:[[n.b,s.a,o.q,x]]}),w)}}]);